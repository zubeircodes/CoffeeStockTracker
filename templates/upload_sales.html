{% extends "base.html" %}

{% block title %}Upload Sales Data{% endblock %}

{% block content %}
<div class="row align-items-center mb-4">
    <div class="col">
        <h1 class="h3 mb-0">Upload Sales Data</h1>
        <p class="text-muted">Import sales data from Clover POS system</p>
    </div>
    <div class="col-md-auto">
        <a href="{{ url_for('revenue.revenue_dashboard') }}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-1"></i> Back to Dashboard
        </a>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card mb-4">
            <div class="card-header bg-dark">
                <h5 class="mb-0">Upload CSV File</h5>
            </div>
            <div class="card-body">
                <form method="POST" enctype="multipart/form-data">
                    {{ form.hidden_tag() }}
                    
                    <div class="mb-3">
                        {{ form.sales_file.label(class="form-label") }}
                        {{ form.sales_file(class="form-control") }}
                        {% if form.sales_file.errors %}
                            {% for error in form.sales_file.errors %}
                                <div class="text-danger">{{ error }}</div>
                            {% endfor %}
                        {% endif %}
                        <div class="form-text">
                            Upload a CSV file exported from your Clover POS system
                        </div>
                    </div>
                    
                    {{ form.submit(class="btn btn-primary") }}
                </form>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-dark">
                <h5 class="mb-0">CSV Format Guidelines</h5>
            </div>
            <div class="card-body">
                <p>The CSV file should contain the following columns:</p>
                <ul>
                    <li><strong>Order ID</strong> - Unique identifier for each sale</li>
                    <li><strong>Time</strong> - Date and time of the sale</li>
                    <li><strong>Item Name</strong> - Name of the product sold</li>
                    <li><strong>Price</strong> - Price of the item</li>
                    <li><strong>Quantity</strong> - Number of units sold</li>
                </ul>
                <p>Optional columns:</p>
                <ul>
                    <li><strong>SKU</strong> - Product SKU (used to match with inventory)</li>
                    <li><strong>Tax</strong> - Tax amount</li>
                    <li><strong>Discount</strong> - Discount amount</li>
                    <li><strong>Payment Type</strong> - Method of payment</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card mb-4">
            <div class="card-header bg-dark">
                <h5 class="mb-0">Instructions</h5>
            </div>
            <div class="card-body">
                <h6 class="mb-3">How to export data from Clover:</h6>
                <ol>
                    <li>Log in to your Clover dashboard</li>
                    <li>Go to "Reporting" section</li>
                    <li>Select "Orders" or "Sales" report</li>
                    <li>Set your desired date range</li>
                    <li>Click "Export" and select CSV format</li>
                    <li>Download the file to your computer</li>
                    <li>Upload the file using the form on this page</li>
                </ol>
                <div class="alert alert-info mt-3">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Note:</strong> The system will automatically match products with your inventory if the SKU or product name matches.
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}