{% extends 'base.html' %}

{% block head %}
{{ super() }}
<!-- Add any additional CSS for datetime picker -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>{% if shift %}Edit{% else %}Add{% endif %} Shift</h1>
        <div>
            <a href="{{ url_for('staff.shift_calendar') }}" class="btn btn-outline-info">
                <i class="fas fa-calendar-alt"></i> Shift Calendar
            </a>
            <a href="{{ url_for('staff.google_calendar') }}" class="btn btn-outline-secondary">
                <i class="fab fa-google"></i> Google Calendar
            </a>
        </div>
    </div>

    <div class="card shadow">
        <div class="card-body">
            <form method="POST" action="">
                {{ form.hidden_tag() }}
                
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            {{ form.staff_id.label(class="form-label") }}
                            {{ form.staff_id(class="form-select") }}
                            {% for error in form.staff_id.errors %}
                            <span class="text-danger">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            {{ form.shift_type.label(class="form-label") }}
                            {{ form.shift_type(class="form-select") }}
                            {% for error in form.shift_type.errors %}
                            <span class="text-danger">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            {{ form.start_time.label(class="form-label") }}
                            {{ form.start_time(class="form-control datetime-picker") }}
                            {% for error in form.start_time.errors %}
                            <span class="text-danger">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            {{ form.end_time.label(class="form-label") }}
                            {{ form.end_time(class="form-control datetime-picker") }}
                            {% for error in form.end_time.errors %}
                            <span class="text-danger">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            {{ form.location.label(class="form-label") }}
                            {{ form.location(class="form-control") }}
                            {% for error in form.location.errors %}
                            <span class="text-danger">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            {{ form.status.label(class="form-label") }}
                            {{ form.status(class="form-select") }}
                            {% for error in form.status.errors %}
                            <span class="text-danger">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="col-12">
                        <div class="form-group mb-3">
                            {{ form.notes.label(class="form-label") }}
                            {{ form.notes(class="form-control", rows=3) }}
                            {% for error in form.notes.errors %}
                            <span class="text-danger">{{ error }}</span>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="col-12 mt-4">
                        <div class="d-flex justify-content-between">
                            <a href="{{ url_for('staff.shift_calendar') }}" class="btn btn-outline-secondary">Cancel</a>
                            {{ form.submit(class="btn btn-primary") }}
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<!-- Flatpickr for datetime picking -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize datetime pickers
        flatpickr(".datetime-picker", {
            enableTime: true,
            dateFormat: "Y-m-d H:i",
            time_24hr: true,
            minuteIncrement: 15
        });
    });
</script>
{% endblock %}